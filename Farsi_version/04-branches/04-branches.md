
---

<div dir="rtl" align="right">

# 🌿 درس ۴ — شاخه‌ها (Branches)، ادغام (Merge) و بازنویسی (Rebase)

---

## 🎯 هدف درس
در این درس یاد می‌گیری:
- شاخه (branch) چیه و چرا مهمه  
- چطور شاخه بسازی، عوض کنی و حذفش کنی  
- چطور شاخه‌ها رو به هم ادغام (merge) کنی  
- تفاوت بین `merge` و `rebase` چیه  
- چطور تعارض‌ها (conflicts) رو حل کنی  

---

## 🧠 مفهوم Branch در Git
فرض کن یه پروژه داری و می‌خوای یه ویژگی جدید (feature) اضافه کنی،  
ولی نمی‌خوای نسخه‌ی اصلی پروژه‌ت (main) خراب بشه.

در این حالت، یه شاخه جدا می‌سازی تا تغییراتت رو اون‌جا تست کنی.  
اگه درست بود، در نهایت اون شاخه رو با main ادغام می‌کنی ✅

📦 **Branch** در واقع یک "کپی سبک" از کل پروژه‌ست که Git با اشاره‌گر (pointer) به commit‌ها مدیریت می‌کنه.

---

## 🌱 گام ۱ — دیدن شاخه‌های موجود
```bash
git branch
````

🔹 خروجی:

```
* main
```

علامت * نشون می‌ده الان روی کدوم شاخه هستی.

---

## 🌿 گام ۲ — ساخت شاخه جدید

مثلاً برای اضافه کردن بخش ثبت‌نام کاربران:

```bash
git branch signup-form
```

حالا اگه دوباره `git branch` بزنی، می‌بینی دو شاخه داری:

```
  main
* signup-form
```

---

## 🔀 گام ۳ — تغییر شاخه

برای رفتن به شاخه جدید:

```bash
git checkout signup-form
```

یا روش جدیدتر (و توصیه‌شده‌تر):

```bash
git switch signup-form
```

---

## 🧩 گام ۴ — ایجاد تغییر در شاخه جدید

یه فایل بساز و commit کن:

```bash
echo "<form>Signup here</form>" > form.html
git add form.html
git commit -m "اضافه کردن فرم ثبت‌نام"
```

حالا این commit فقط داخل شاخه signup-form هست، نه در main.

---

## 🧭 گام ۵ — برگشت به شاخه اصلی (main)

```bash
git checkout main
# یا
git switch main
```

ببین فایل form.html اینجا نیست، چون فقط در شاخه signup-form ساخته شده بود.

---

## 🌳 گام ۶ — ادغام شاخه‌ها (Merge)

وقتی کار روی feature تموم شد، باید تغییراتش رو به main منتقل کنی.

1️⃣ اول برو به شاخه‌ای که می‌خوای ادغام بشه (main):

```bash
git checkout main
```

2️⃣ بعد ادغام کن:

```bash
git merge signup-form
```

اگر هیچ تعارضی نباشه، Git خودش commit ادغام رو می‌سازه.

📦 حالا شاخه main شامل تغییرات signup-form هم هست.

---

## ⚠️ گام ۷ — تعارض (Merge Conflict)

گاهی دو شاخه روی یه خط از یک فایل تغییر ایجاد می‌کنن.

مثلاً هر دو شاخه فایل `index.html` رو عوض کرده باشن.
در این حالت Git نمی‌دونه کدوم نسخه رو نگه داره و خطای زیر می‌ده:

```
CONFLICT (content): Merge conflict in index.html
```

Git توی فایل علامت‌گذاری می‌کنه:

```html
<<<<<<< HEAD
<p>این متن از شاخه main است</p>
=======
<p>این متن از شاخه signup-form است</p>
>>>>>>> signup-form
```

حالا باید فایل رو باز کنی و خودت تصمیم بگیری چی بمونه، بعد ذخیره و اجرا کن:

```bash
git add index.html
git commit
```

تعارض حل شد ✅

---

## 🌈 گام ۸ — حذف شاخه بعد از ادغام

بعد از merge، شاخه فرعی دیگه لازم نیست:

```bash
git branch -d signup-form
```

اگر Git گفت هنوز merge نشده، و مطمئنی می‌خوای حذفش کنی:

```bash
git branch -D signup-form
```

---

## 🧬 گام ۹ — مقایسه Merge و Rebase

| ویژگی          | Merge                          | Rebase                     |
| -------------- | ------------------------------ | -------------------------- |
| نوع ادغام      | commit جدید برای ادغام می‌سازد | تاریخچه را بازنویسی می‌کند |
| ساختار تاریخچه | شاخه‌ای (شاخه‌ها دیده می‌شوند) | خطی و تمیز                 |
| مناسب برای     | همکاری تیمی و حفظ تاریخچه اصلی | تاریخچه تمیز در شاخه شخصی  |

مثال ساده Rebase:

```bash
git checkout signup-form
git rebase main
```

یعنی: "تغییرات من را طوری اعمال کن انگار از آخرین نسخه main شروع کرده‌ام".

---

## 📊 گام ۱۰ — نمایش گراف شاخه‌ها

```bash
git log --oneline --graph --decorate --all
```

خروجی مثلاً:

```
* 7b8e6ad (HEAD -> signup-form) اضافه کردن فرم ثبت‌نام
| * 3c2d1ff (main) ایجاد ساختار اولیه سایت
|/
```

این دستور خیلی برای درک ساختار شاخه‌ها مفیده 🔍

---

## 🧪 تمرین درس ۴

1️⃣ پروژه‌ای که در درس قبل ساختی باز کن.

2️⃣ شاخه‌ای بساز به نام `feature-header`.

3️⃣ یه فایل `header.html` درست کن، محتواش رو بنویس، commit کن.

4️⃣ برگرد به شاخه main و merge کن.

5️⃣ گراف شاخه‌ها رو با `git log --oneline --graph --all` ببین.

6️⃣ شاخه `feature-header` رو حذف کن.

7️⃣ نتیجهٔ دستوراتت رو توی فایل `lesson4-branches.txt` بنویس و ذخیره کن.

---

## 🧾 خلاصه (Cheat Sheet)

| دستور                             | توضیح                                    |
| --------------------------------- | ---------------------------------------- |
| `git branch`                      | نمایش شاخه‌ها                            |
| `git branch <name>`               | ساخت شاخه جدید                           |
| `git checkout <name>`             | رفتن به شاخه مورد نظر                    |
| `git switch <name>`               | روش جدیدتر برای تغییر شاخه               |
| `git merge <branch>`              | ادغام شاخه در شاخه فعلی                  |
| `git branch -d <name>`            | حذف شاخه ادغام‌شده                       |
| `git log --oneline --graph --all` | نمایش گراف شاخه‌ها                       |
| `git rebase <branch>`             | بازنویسی تاریخچه شاخه برای ساختار خطی‌تر |

---

## 🚀 مرحله بعد

تا اینجا یاد گرفتی چطور روی شاخه‌های مختلف کار کنی و اون‌ها رو باهم ادغام کنی.
در درس بعدی وارد دنیای حرفه‌ای‌تر می‌شیم —
یعنی **دستورات پیشرفته** مثل `stash`, `reset`, `revert`, `cherry-pick`, `bisect`, و `reflog`.

📁 مسیر بعدی: `05-advanced/README.md`

</div>
```